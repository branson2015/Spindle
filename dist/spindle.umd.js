'use strict';(function(h,n){"object"===typeof exports&&"undefined"!==typeof module?n(exports):"function"===typeof define&&define.amd?define(["exports"],n):n(h.Spindle={})})(this,function(h){function n(a){return x[a.toLowerCase()]||"innerHTML"}function p(a,d,b,e,c,f){this.e=a;this.t=d;this.v=b;this.c=e;this.rc=c;this.tc=f}function q(a,d=document){if("string"===typeof a)return"scope"===a?d:Array.from(d.querySelectorAll(a));if(a instanceof p)return q(a.e,d);if(a instanceof HTMLElement||a instanceof HTMLDocument)return[a];
if(a instanceof HTMLCollection)return Array.from(a);throw"Error: Expected Primary Type, instead got "+a;}function u(a){var d=a.Spindle.obj[a.Spindle.key];delete a.Spindle.obj[a.Spindle.key];a.Spindle.obj[a.Spindle.key]=d;a.removeEventListener("input",a.Spindle.s,!0);delete a.Spindle}function r(a,d,b){if(void 0===Object.getOwnPropertyDescriptor(a,d).set){var e=a[d];Object.defineProperty(a,d,{get:function(){return e},set:function(c){l(a[d],c,b,function(a,b,d){a[b]=d});e=a[d]},configurable:!0})}}function l(a,
d,b,e){for(var c in d){var f=a,k=d[c],g=c.split(/[\.\[\]'"]/).filter(function(a){return a});for(c=g.shift();g.length;c=g.shift())f[c]||(f[c]=Number.isInteger(+g[0])?[]:{}),r(f,c,b),f=f[c];"object"!==typeof k||k instanceof p||k instanceof HTMLElement||k instanceof HTMLCollection?e(f,c,k,b):(f[c]||(f[c]={}),r(f,c,b),l(f[c],k,b,e))}}function v(a,d,b,e){if(Array.isArray(b.v)){a[d]=[];r(a,d,e);for(var c=0;c<b.length;++c){var f=[b[c]];f.v=b.v[c];v(a[d],c,f,e)}}else{if(void 0!==b.v)for(c=0;c<b.length;++c)b[c].e[b[c].t]=
b.v;else b.v=1==b.length?b[0].e[b[0].t]:null;for(c=0;c<b.length;++c)"INPUT"===b[c].e.tagName&&function(c){var e=function(e){b.dirty=!0;e=b[c].e[b[c].t];a[d]=b[c].rc?b[c].rc(e):e;for(var g=0;g<b.length;++g)b[g].e[b[g].t]=e};b[c].e.addEventListener("input",e,!0);b[c].e.Spindle={obj:a,key:d,s:e}}(c);Object.defineProperty(a,d,{get:function(){return b.v},set:function(c){if(c instanceof t)return c.c(a,d,b);b.v=c;for(var e=0;e<b.length;++e)b.dirty||(b[e].e[b[e].t]=b[e].tc?b[e].tc(c):c),b[e].c&&b[e].c(c,
b[e].e,b[e].t,e);delete b.dirty},configurable:!0})}}function w(a,d,b,e){Array.isArray(a[d])&&r(a,d,e);if(b instanceof p){var c=b.t;var f=b.v;var k=b.c;var g=b.rc;var h=b.tc;b=b.e}b=q(b,e);if(0!==b.length){for(var l=[],m=0;m<b.length;++m)l.push({e:b[m],t:Array.isArray(c)?c[m]:c||n(b[m].tagName),c:Array.isArray(k)?k[m]:k,tc:Array.isArray(h)?h[m]:h,rc:Array.isArray(g)?g[m]:g});l.v=f||a[d];v(a,d,l,e)}}var x={audio:"src",embed:"src",form:"action",img:"src",input:"value",object:"data",optgroup:"label",
option:"value",output:"for",param:"value",progress:"value",source:"src",time:"datetime",track:"src",video:"src",button:"value",checkbox:"checked",color:"value",email:"value",number:"value",password:"value",radio:"checked",range:"value",reset:"value",search:"value",submit:"value",tel:"value",text:"value"},t=function(a){this.c=a};h.Bind=function(a){var d=a.object||{},b=a.scopes?q(a.scopes):[document];if(1===b.length)l(d,a.mapping,b[0],w);else if(Array.isArray(d))for(var e=0;e<b.length;++e)l(d[e]||(d[e]=
{}),a.mapping,b[e],w);else throw"Given multiple scopes, but object is not of Array type, instead got "+d;return d};h.UnBind=function(a){return new t(function(d,b,e){if(void 0===a)for(a=[],d=0;d<e.length;++d)a.push(e[d].e);else a=q(a);for(d=0;d<a.length;++d)u(a[d])})};h.ReBind=function(a){a instanceof p||(a=new p(a));return new t(function(d,b,e){for(var c=0;c<e.length;++c)u(e[c].e);window.Spindle.Bind({object:d,mapping:{[b]:a}})})};h.Link=function(a){return new p(a.elements,a.types,a.values,a.callbacks,
a.retrieves,a.transforms)};h.getDefaultAttribute=n;Object.defineProperty(h,"__esModule",{value:!0})});
